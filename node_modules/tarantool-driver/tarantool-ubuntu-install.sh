#!/bin/bash
# install these utilities if they are missing
apt-get -y update
apt-get -y install gnupg2 curl

curl http://download.tarantool.org/tarantool/1.10/gpgkey | apt-key add -

# install the lsb-release utility and use it to identify the current OS code name;
# alternatively, you can set the OS code name manually, e.g. xenial or bionic
apt-get -y install lsb-release
release=`lsb_release -c -s`

# install https download transport for APT
apt-get -y install apt-transport-https

# append two lines to a list of source repositories
rm -f /etc/apt/sources.list.d/*tarantool*.list
echo "deb http://download.tarantool.org/tarantool/1.10/ubuntu/ ${release} main" | tee /etc/apt/sources.list.d/tarantool_1_10.list
echo "deb-src http://download.tarantool.org/tarantool/1.10/ubuntu/ ${release} main" | tee -a /etc/apt/sources.list.d/tarantool_1_10.list

# install tarantool
apt-get -y update
apt-get -y install tarantool
